<div class="space-y-2">
    <%= form_with(model: [artwork, Comment.new], local: true) do |form| %>
        <div class="flex items-start gap-2 mt-3">
            <%= form.text_area :content, class: "w-full rounded-md p-2", placeholder: "Leave a comment..." %>
            <%= form.submit "Comment", class: "py-2 px-4 bg-yellow-300 rounded-md cursor-pointer hover:bg-yellow-400 transition-all" %>
        </div>
    <% end %>

    <% comments = artwork.comments.order(created_at: :desc) %>
    <% comments = comments.limit(3) if action_name == "index" %>

    <% comments.each do |comment| %>
        <div class="bg-gray-100 rounded-md p-3 mb-2">
            <div class="flex items-center justify-between">
                <span class="text-base font-medium">
                    <%= link_to comment.user.name, user_path(comment.user), class: "hover:underline" %>
                </span>
                <% if current_user.id == comment.user.id %>
                    <div class="flex items-center text-xs gap-2 text-gray-500">
                        <%= link_to 'Edit', edit_artwork_comment_path(artwork, comment) %>
                        <%= button_to "Delete", artwork_comment_path(artwork, comment), method: :delete, form: { data: { turbo_confirm: "Are you sure you want to delete this artwork?" } }, class: "text-red-500 hover:underline" %>
                    </div>
                <% end %>
            </div>
            <p class="text-gray-700 mt-2"><%= comment.content %></p>
            <span class="text-xs text-gray-500"><%= time_ago_in_words(comment.created_at) %> ago</span>
        </div>
    <% end %>
    <% if action_name == "index" && artwork.comments.count > 3 %>
        <%= link_to "View More Comments", artwork_path(artwork), class: "text-blue-500 hover:underline text-sm" %>
    <% end %>
</div>